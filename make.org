signal-handler> make

* make begins
[ -d $HOME/quicklisp/local-projects/signal-handler/ ] || mkdir -p $HOME/quicklisp/local-projects/signal-handler/
[ -d generated/from/ ] || mkdir -p generated/from/
[ -d generated/headers/ ] || mkdir -p generated/headers/
echo `emacsclient -e '(printangle "signal-handler.org")'` | sed 's/"//g' > generated/from/signal-handler.org
echo `emacsclient -e '(printangle "packaging.org")'` | sed 's/"//g' > generated/from/packaging.org
cat generated/headers/signal-handler.lisp generated/signal-handler.lisp > $HOME/quicklisp/local-projects/signal-handler/signal-handler.lisp
cat generated/headers/example.lisp generated/example.lisp > $HOME/quicklisp/local-projects/signal-handler/example.lisp
cat generated/signal-handler.asd > $HOME/quicklisp/local-projects/signal-handler/signal-handler.asd
cat description.org > $HOME/quicklisp/local-projects/signal-handler/description.org
cat version.org > $HOME/quicklisp/local-projects/signal-handler/version.org
tar jcfv generated/signal-handler.tbz --directory=$HOME/quicklisp/local-projects/signal-handler/..  --exclude=example.bin signal-handler/
signal-handler/
signal-handler/version.org
signal-handler/example.lisp
signal-handler/signal-handler.lisp
signal-handler/signal-handler.asd
signal-handler/description.org
cat description.org > generated/description.org

* compiling example.bin
*** COMPILING THE BINARY ***
~/local/bin/sbcl --quit --eval "(asdf:make :signal-handler/example)" 2> [[file:generated/example.bin.2.log][generated/example.bin.2.log]] > [[file:generated/example.bin.1.log][generated/example.bin.1.log]]


*** COMPILED THE BINARY ***

rm -r /tmp/sbcl.lock/acceptor
rm: невозможно удалить '/tmp/sbcl.lock/acceptor': Нет такого файла или каталога
make: [Makefile:18: demo] Ошибка 1 (игнорирование)
Makefile--> PID=25046

* launching the DEMO
*** will launch the DEMO now ***

generated/tell
lisp code says that its PID=25046
kill -s USR1 25046
Now let us ensure that our message has been delivered.
1th check: waiting for the LISP code that must delete /tmp/sbcl.lock/acceptor/by
After 1/10 seconds, the message was delivered.
all done, ready for more messages
rm generated/headers/make: unlink: generated/headers/: Это каталог
 generated/from/make: unlink: generated/from/: Это каталог

signal-handler> 02/10 11:34:34.000 INFO SH :signal-handler is now ready to treat kill signals.
02/10 11:34:34.000 DEBUG SHE started simple-handler service
02/10 11:34:34.000 INFO SHE will accept messages for the next 3 seconds
02/10 11:34:34.068 DEBUG SH found the directory acceptor, will now read the file
02/10 11:34:34.068 INFO SHE my killer told me: "Let me tell you something: the time now is Ср фев 10 11:34:34 EST 2021"
02/10 11:34:34.068 DEBUG SH received the message "Let me tell you something: the time now is Ср фев 10 11:34:34 EST 2021", erasing the file /tmp/sbcl.lock/acceptor/by
02/10 11:34:37.004 INFO SHE time is up, hook is removed, messages are ignored from now
